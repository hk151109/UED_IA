<!DOCTYPE html>
<html lang="en"><head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>Library Online Catalogue - Search</title>
<script src="https://cdn.tailwindcss.com?plugins=forms,typography"></script>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&amp;display=swap" rel="stylesheet"/>
<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet"/>
<script>
    tailwind.config = {
      darkMode: "class",
      theme: {
        extend: {
          colors: {
            primary: "#A91D3A",
            "background-light": "#F8F9FA",
            "background-dark": "#121212",
            "surface-light": "#FFFFFF",
            "surface-dark": "#1E1E1E",
            "text-light": "#212529",
            "text-dark": "#E9ECEF",
            "subtle-light": "#6C757D",
            "subtle-dark": "#ADB5BD",
            "accent-light": "#007BFF",
            "accent-dark": "#00BFFF",
          },
          fontFamily: {
            display: ["Inter", "sans-serif"],
          },
          borderRadius: {
            DEFAULT: "0.5rem",
          },
        },
      },
    };
  </script>
<style>
    body {
      font-family: 'Inter', sans-serif;
    }
    .clip-path-diagonal {
      clip-path: polygon(60% 0, 100% 0, 100% 100%, 68% 100%);
      background-color: #b91c1c;
    }
  </style>
</head>
<body class="bg-background-light dark:bg-background-dark text-text-light dark:text-text-dark">
<a href="#main-content" class="sr-only focus:not-sr-only focus:absolute focus:top-2 focus:left-2 bg-primary text-white px-4 py-2 rounded-md z-50">Skip to main content</a>
<div id="root">
<header class="relative shadow-md">
  <!-- Top accessibility bar with diagonal cut (hidden on mobile) -->
  <div class="relative h-9 hidden md:block">
    <div class="absolute top-0 left-0 w-full h-9 clip-path-diagonal z-0"></div>
    <div class="relative z-10 container mx-auto px-4 sm:px-6 lg:px-8 h-full">
      <div class="flex items-center justify-end h-full gap-1 sm:gap-1 text-white">
        <!-- Theme toggle -->
        <button id="contrast-toggle" aria-label="Toggle dark or light theme" aria-pressed="false" class="flex items-center gap-1 px-3 h-8 rounded-full bg-white/90 text-gray-800 hover:bg-white focus:outline-none focus:ring-2 focus:ring-white/60 dark:bg-gray-800 dark:text-text-dark dark:hover:bg-gray-700">
          <span class="material-icons text-base" aria-hidden="true">contrast</span>
          <span class="hidden xl:inline text-xs font-medium tracking-wide">Theme</span>
        </button>

        <!-- Divider -->
        <span class="hidden sm:block h-4 w-px bg-white/40" aria-hidden="true"></span>

        <!-- Font size controls -->
        <div class="flex items-center gap-1 sm:gap-2">
          <button id="font-decrease" aria-label="Decrease font size" class="min-w-[2rem] h-8 px-2 flex items-center justify-center rounded-full bg-white/90 text-gray-800 hover:bg-white focus:outline-none focus:ring-2 focus:ring-white/60 dark:bg-gray-800 dark:text-text-dark dark:hover:bg-gray-700">
            <span class="text-xs font-semibold tracking-wide">-A</span>
          </button>
          <div aria-live="polite" id="font-scale-indicator" class="text-[11px] font-medium opacity-90 select-none w-12 text-center text-white">100%</div>
          <button id="font-increase" aria-label="Increase font size" class="min-w-[2rem] h-8 px-2 flex items-center justify-center rounded-full bg-white/90 text-gray-800 hover:bg-white focus:outline-none focus:ring-2 focus:ring-white/60 dark:bg-gray-800 dark:text-text-dark dark:hover:bg-gray-700">
            <span class="text-xs font-semibold tracking-wide">+A</span>
          </button>
        </div>

        <!-- Divider -->
        <span class="hidden sm:block h-4 w-px bg-white/40" aria-hidden="true"></span>

        <!-- Motion toggle -->
        <button id="motion-toggle" aria-label="Toggle reduced motion" aria-pressed="false" class="flex items-center gap-1 px-3 h-8 rounded-full bg-white/90 text-gray-800 hover:bg-white focus:outline-none focus:ring-2 focus:ring-white/60 dark:bg-gray-800 dark:text-text-dark dark:hover:bg-gray-700">
          <span class="material-icons text-base" aria-hidden="true">motion_photos_off</span>
          <span class="hidden xl:inline text-xs font-medium tracking-wide">Motion</span>
        </button>

        <!-- Divider -->
        <span class="hidden sm:block h-4 w-px bg-white/40" aria-hidden="true"></span>

        <!-- Language switch -->
        <label for="language-switch" class="sr-only">Change language</label>
        <select id="language-switch" class="h-8 rounded-full border-0 bg-white/95 text-gray-800 text-xs px-3 pr-7 focus:ring-2 focus:ring-white/60 dark:bg-gray-800 dark:text-text-dark">
          <option value="en">English</option>
          <option value="hi">हिन्दी</option>
          <option value="mr">मराठी</option>
        </select>
      </div>
    </div>
  </div>

  <!-- Main navigation bar -->
  <div class="bg-surface-light dark:bg-surface-dark">
    <div class="container mx-auto px-4 sm:px-6 lg:px-8">
      <div class="flex items-center py-2 gap-4 lg:gap-8">
        <!-- Left Logo -->
        <div class="flex items-center space-x-4 shrink-0">
          <img alt="Somaiya Vidyavihar logo" class="h-12 sm:h-14 md:h-16" src="./assets/svu_logo.svg"/>
          <div class="hidden lg:block">
            <!-- <h1 class="text-lg font-bold text-primary leading-tight">SOMAIYA VIDYAVIHAR</h1>
            <p class="text-xs text-subtle-light dark:text-subtle-dark tracking-wide">Library Online Catalogue</p> -->
          </div>
        </div>

        <!-- Mobile Navigation Controls -->
        <div class="flex items-center gap-2 ml-auto md:hidden">
          <!-- Mobile Accessibility Button -->
          <button id="mobile-accessibility-toggle" aria-label="Open accessibility options" class="p-2 rounded-full bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-primary">
            <span class="material-icons text-lg text-gray-600 dark:text-gray-300">accessibility</span>
          </button>
          
          <!-- Mobile Menu Toggle -->
          <button id="mobile-menu-toggle" aria-label="Open navigation menu" aria-expanded="false" class="p-2 rounded-full bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-primary">
            <span class="material-icons text-lg text-gray-600 dark:text-gray-300">menu</span>
          </button>
        </div>

        <!-- Desktop Navigation -->
        <nav aria-label="Primary" class="flex-1 hidden md:block">
          <ul class="flex flex-wrap items-center justify-center gap-x-4 gap-y-2 text-sm lg:text-base" role="menubar">
            <li role="none">
              <a role="menuitem" class="flex items-center gap-1 text-subtle-light dark:text-subtle-dark hover:text-primary dark:hover:text-primary focus:outline-none focus:ring-2 focus:ring-primary px-2 py-1 rounded" href="index.html">
                <span class="material-icons text-base lg:text-lg" aria-hidden="true">home</span>
                <span>Home</span>
              </a>
            </li>
            <li role="none">
              <a role="menuitem" class="flex items-center gap-1 text-subtle-light dark:text-subtle-dark hover:text-primary dark:hover:text-primary focus:outline-none focus:ring-2 focus:ring-primary px-2 py-1 rounded" href="login.html">
                <span class="material-icons text-base lg:text-lg" aria-hidden="true">person</span>
                <span>My Account</span>
              </a>
            </li>
            <li role="none">
              <a role="menuitem" class="flex items-center gap-1 text-subtle-light dark:text-subtle-dark hover:text-primary dark:hover:text-primary focus:outline-none focus:ring-2 focus:ring-primary px-2 py-1 rounded" href="ask-librarian.html">
                <span class="material-icons text-base lg:text-lg" aria-hidden="true">help_outline</span>
                <span>Ask a Librarian</span>
              </a>
            </li>
            <li role="none">
              <a role="menuitem" class="flex items-center gap-1 text-subtle-light dark:text-subtle-dark hover:text-primary dark:hover:text-primary focus:outline-none focus:ring-2 focus:ring-primary px-2 py-1 rounded" href="FAQ.html">
                <span class="material-icons text-base lg:text-lg" aria-hidden="true">info</span>
                <span>Help (FAQ)</span>
              </a>
            </li>
            <li role="none">
              <a role="menuitem" class="flex items-center gap-1 text-primary font-medium focus:outline-none focus:ring-2 focus:ring-primary px-2 py-1 rounded" href="catalogue.html">
                <span class="material-icons text-base lg:text-lg" aria-hidden="true">search</span>
                <span>Catalogue Search</span>
              </a>
            </li>
          </ul>
        </nav>

        <!-- Right Logo (Desktop only) -->
        <img alt="Trust logo" class="h-12 sm:h-14 hidden lg:block" src="./assets/svu_trust.svg"/>
      </div>
    </div>
  </div>

  <!-- Mobile Navigation Menu (Hidden by default) -->
  <div id="mobile-menu" class="fixed inset-0 z-50 hidden md:hidden">
    <!-- Backdrop -->
    <div class="fixed inset-0 bg-black bg-opacity-50" id="mobile-menu-backdrop"></div>
    
    <!-- Menu Panel -->
    <div class="fixed inset-y-0 right-0 w-80 max-w-full bg-surface-light dark:bg-surface-dark shadow-xl transform transition-transform">
      <!-- Menu Header -->
      <div class="flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700">
        <h2 class="text-lg font-semibold text-text-light dark:text-text-dark">Navigation</h2>
        <button id="mobile-menu-close" aria-label="Close navigation menu" class="p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-primary">
          <span class="material-icons text-lg text-gray-600 dark:text-gray-300">close</span>
        </button>
      </div>
      
      <!-- Menu Content -->
      <div class="flex-1 overflow-y-auto p-4">
        <nav aria-label="Mobile Navigation">
          <ul class="space-y-2">
            <li>
              <a class="flex items-center gap-3 p-3 rounded-lg text-subtle-light dark:text-subtle-dark hover:text-primary hover:bg-gray-100 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-primary" href="index.html">
                <span class="material-icons text-xl" aria-hidden="true">home</span>
                <span class="font-medium">Home</span>
              </a>
            </li>
            <li>
              <a class="flex items-center gap-3 p-3 rounded-lg text-subtle-light dark:text-subtle-dark hover:text-primary hover:bg-gray-100 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-primary" href="login.html">
                <span class="material-icons text-xl" aria-hidden="true">person</span>
                <span class="font-medium">My Account</span>
              </a>
            </li>
            <li>
              <a class="flex items-center gap-3 p-3 rounded-lg text-subtle-light dark:text-subtle-dark hover:text-primary hover:bg-gray-100 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-primary" href="ask-librarian.html">
                <span class="material-icons text-xl" aria-hidden="true">help_outline</span>
                <span class="font-medium">Ask a Librarian</span>
              </a>
            </li>
            <li>
              <a class="flex items-center gap-3 p-3 rounded-lg text-subtle-light dark:text-subtle-dark hover:text-primary hover:bg-gray-100 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-primary" href="FAQ.html">
                <span class="material-icons text-xl" aria-hidden="true">info</span>
                <span class="font-medium">Help (FAQ)</span>
              </a>
            </li>
            <li>
              <a class="flex items-center gap-3 p-3 rounded-lg text-primary bg-red-50 dark:bg-red-900/20 font-medium focus:outline-none focus:ring-2 focus:ring-primary" href="catalogue.html">
                <span class="material-icons text-xl" aria-hidden="true">search</span>
                <span>Catalogue Search</span>
              </a>
            </li>
          </ul>
        </nav>
      </div>
    </div>
  </div>

  <!-- Mobile Accessibility Menu (Hidden by default) -->
  <div id="mobile-accessibility-menu" class="fixed inset-0 z-50 hidden md:hidden">
    <!-- Backdrop -->
    <div class="fixed inset-0 bg-black bg-opacity-50" id="accessibility-menu-backdrop"></div>
    
    <!-- Menu Panel -->
    <div class="fixed inset-y-0 right-0 w-80 max-w-full bg-surface-light dark:bg-surface-dark shadow-xl transform transition-transform">
      <!-- Menu Header -->
      <div class="flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700">
        <h2 class="text-lg font-semibold text-text-light dark:text-text-dark flex items-center gap-2">
          <span class="material-icons text-primary">accessibility</span>
          Accessibility
        </h2>
        <button id="accessibility-menu-close" aria-label="Close accessibility menu" class="p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-primary">
          <span class="material-icons text-lg text-gray-600 dark:text-gray-300">close</span>
        </button>
      </div>
      
      <!-- Menu Content -->
      <div class="flex-1 overflow-y-auto p-4 space-y-4">
        <!-- Theme Toggle -->
        <div class="p-3 bg-gray-50 dark:bg-gray-800 rounded-lg">
          <h3 class="text-sm font-semibold text-text-light dark:text-text-dark mb-2 flex items-center gap-2">
            <span class="material-icons text-base">contrast</span>
            Theme
          </h3>
          <button id="mobile-contrast-toggle" aria-label="Toggle dark or light theme" aria-pressed="false" class="w-full flex items-center justify-between p-3 rounded-lg bg-white dark:bg-gray-700 hover:bg-gray-100 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-primary">
            <span class="text-sm font-medium text-text-light dark:text-text-dark">Dark Mode</span>
            <span class="material-icons text-text-light dark:text-text-dark">toggle_off</span>
          </button>
        </div>

        <!-- Font Size Controls -->
        <div class="p-3 bg-gray-50 dark:bg-gray-800 rounded-lg">
          <h3 class="text-sm font-semibold text-text-light dark:text-text-dark mb-2 flex items-center gap-2">
            <span class="material-icons text-base">text_fields</span>
            Font Size
          </h3>
          <div class="flex items-center justify-between">
            <button id="mobile-font-decrease" aria-label="Decrease font size" class="flex items-center justify-center w-10 h-10 rounded-lg bg-white dark:bg-gray-700 hover:bg-gray-100 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-primary">
              <span class="text-sm font-semibold text-text-light dark:text-text-dark">-A</span>
            </button>
            <div aria-live="polite" id="mobile-font-scale-indicator" class="text-sm font-medium text-text-light dark:text-text-dark">100%</div>
            <button id="mobile-font-increase" aria-label="Increase font size" class="flex items-center justify-center w-10 h-10 rounded-lg bg-white dark:bg-gray-700 hover:bg-gray-100 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-primary">
              <span class="text-sm font-semibold text-text-light dark:text-text-dark">+A</span>
            </button>
          </div>
        </div>

        <!-- Motion Toggle -->
        <div class="p-3 bg-gray-50 dark:bg-gray-800 rounded-lg">
          <h3 class="text-sm font-semibold text-text-light dark:text-text-dark mb-2 flex items-center gap-2">
            <span class="material-icons text-base">motion_photos_off</span>
            Motion
          </h3>
          <button id="mobile-motion-toggle" aria-label="Toggle reduced motion" aria-pressed="false" class="w-full flex items-center justify-between p-3 rounded-lg bg-white dark:bg-gray-700 hover:bg-gray-100 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-primary">
            <span class="text-sm font-medium text-text-light dark:text-text-dark">Reduce Motion</span>
            <span class="material-icons text-text-light dark:text-text-dark">toggle_off</span>
          </button>
        </div>

        <!-- Language Switch -->
        <div class="p-3 bg-gray-50 dark:bg-gray-800 rounded-lg">
          <h3 class="text-sm font-semibold text-text-light dark:text-text-dark mb-2 flex items-center gap-2">
            <span class="material-icons text-base">language</span>
            Language
          </h3>
          <select id="mobile-language-switch" class="w-full p-3 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-text-light dark:text-text-dark focus:ring-2 focus:ring-primary focus:border-primary">
            <option value="en">English</option>
            <option value="hi">हिन्दी</option>
            <option value="mr">मराठी</option>
          </select>
        </div>
      </div>
    </div>
  </div>
</header>

    <div id="accessibility-panel" role="dialog" aria-label="Accessibility settings" class="hidden absolute right-0 top-full mt-2 w-72 max-w-[90vw] bg-surface-light dark:bg-surface-dark border border-gray-200 dark:border-gray-700 shadow-lg rounded-lg p-4 z-40">
      <div class="flex items-center justify-between mb-2">
        <h2 class="text-sm font-semibold tracking-wide text-text-light dark:text-text-dark">Accessibility</h2>
        <button id="accessibility-close" aria-label="Close accessibility panel" class="p-1 rounded-md hover:bg-gray-200 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-primary">
          <span class="material-icons text-base" aria-hidden="true">close</span>
        </button>
      </div>
      <div class="space-y-4 text-sm">
        <div>
          <p class="font-medium mb-1">Theme</p>
          <button id="contrast-toggle" aria-pressed="false" class="flex items-center gap-2 w-full justify-start px-3 py-2 rounded-md bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-primary">
            <span class="material-icons text-base" aria-hidden="true">contrast</span>
            <span>Toggle Dark / Light</span>
          </button>
        </div>
        <div>
          <p class="font-medium mb-1">Text Size</p>
          <div class="flex items-center gap-2">
            <button id="font-decrease" aria-label="Decrease font size" class="w-9 h-9 flex items-center justify-center rounded-md bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-primary">
              <span class="material-icons text-base" aria-hidden="true">remove</span>
            </button>
            <div aria-live="polite" id="font-scale-indicator" class="text-xs text-subtle-light dark:text-subtle-dark select-none w-14 text-center">100%</div>
            <button id="font-increase" aria-label="Increase font size" class="w-9 h-9 flex items-center justify-center rounded-md bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-primary">
              <span class="material-icons text-base" aria-hidden="true">add</span>
            </button>
          </div>
        </div>
        <div>
          <p class="font-medium mb-1">Motion</p>
          <button id="motion-toggle" aria-pressed="false" class="flex items-center gap-2 w-full justify-start px-3 py-2 rounded-md bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-primary">
            <span class="material-icons text-base" aria-hidden="true">motion_photos_off</span>
            <span>Reduce Motion</span>
          </button>
        </div>
        <div>
          <p class="font-medium mb-1">Language</p>
          <select id="language-switch" aria-label="Change language" class="w-full rounded-md border-gray-300 dark:border-gray-600 bg-surface-light dark:bg-surface-dark text-text-light dark:text-text-dark focus:ring-primary focus:border-primary text-sm">
            <option value="en">English</option>
            <option value="hi">हिन्दी</option>
            <option value="mr">मराठी</option>
          </select>
        </div>
      </div>
    </div>
  </div>
</div>
</div>
</header>
<main id="main-content" class="container mx-auto px-4 sm:px-6 lg:px-8 py-8">
<div class="grid grid-cols-1 lg:grid-cols-4 gap-8">
<aside class="lg:col-span-1">
  <!-- Filter Boxes -->
  <div class="bg-surface-light dark:bg-surface-dark p-4 rounded-lg shadow-lg mb-4">
    <h2 class="text-lg font-bold mb-4 text-text-light dark:text-text-dark">Refine Your Search</h2>

    <!-- Filter Buttons Row -->
    <div class="grid grid-cols-2 gap-2 mb-4">
      <!-- Branch Filter -->
      <button id="branch-filter-btn" class="filter-btn flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors">
        <div class="flex items-center gap-2">
          <span class="material-icons text-base text-primary">library_books</span>
          <span class="text-sm font-medium text-text-light dark:text-text-dark">Branch</span>
        </div>
        <span class="material-icons text-base text-subtle-light dark:text-subtle-dark">expand_more</span>
      </button>

      <!-- Material Type Filter -->
      <button id="material-filter-btn" class="filter-btn flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors">
        <div class="flex items-center gap-2">
          <span class="material-icons text-base text-primary">category</span>
          <span class="text-sm font-medium text-text-light dark:text-text-dark">Material</span>
        </div>
        <span class="material-icons text-base text-subtle-light dark:text-subtle-dark">expand_more</span>
      </button>

      <!-- Location Filter -->
      <button id="location-filter-btn" class="filter-btn flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors">
        <div class="flex items-center gap-2">
          <span class="material-icons text-base text-primary">location_on</span>
          <span class="text-sm font-medium text-text-light dark:text-text-dark">Location</span>
        </div>
        <span class="material-icons text-base text-subtle-light dark:text-subtle-dark">expand_more</span>
      </button>

      <!-- Language Filter -->
      <button id="language-filter-btn" class="filter-btn flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors">
        <div class="flex items-center gap-2">
          <span class="material-icons text-base text-primary">language</span>
          <span class="text-sm font-medium text-text-light dark:text-text-dark">Language</span>
        </div>
        <span class="material-icons text-base text-subtle-light dark:text-subtle-dark">expand_more</span>
      </button>
    </div>

    <!-- Active Filters Display -->
    <div id="active-filters" class="space-y-2">
      <!-- Selected filters will appear here as removable boxes -->
    </div>
  </div>

  <!-- Filter Dropdowns (Hidden by default) -->
  <!-- Branch Filter Dropdown -->
  <div id="branch-filter-dropdown" class="filter-dropdown hidden bg-surface-light dark:bg-surface-dark border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg mb-4 max-h-64 overflow-y-auto">
    <div class="p-3 border-b border-gray-200 dark:border-gray-700">
      <h3 class="text-sm font-semibold text-text-light dark:text-text-dark">Select Branch</h3>
    </div>
    <div class="p-3 space-y-2">
      <label class="flex items-center space-x-2 text-xs text-subtle-light dark:text-subtle-dark hover:bg-gray-50 dark:hover:bg-gray-800 p-2 rounded cursor-pointer">
        <input type="checkbox" class="filter-checkbox rounded border-gray-300 dark:border-gray-600 text-primary focus:ring-primary" data-filter="branch" data-value="- Nil -"/>
        <span>- Nil - (1)</span>
      </label>
      <label class="flex items-center space-x-2 text-xs text-subtle-light dark:text-subtle-dark hover:bg-gray-50 dark:hover:bg-gray-800 p-2 rounded cursor-pointer">
        <input type="checkbox" class="filter-checkbox rounded border-gray-300 dark:border-gray-600 text-primary focus:ring-primary" data-filter="branch" data-value="Accounting"/>
        <span>Accounting (298)</span>
      </label>
      <label class="flex items-center space-x-2 text-xs text-subtle-light dark:text-subtle-dark hover:bg-gray-50 dark:hover:bg-gray-800 p-2 rounded cursor-pointer">
        <input type="checkbox" class="filter-checkbox rounded border-gray-300 dark:border-gray-600 text-primary focus:ring-primary" data-filter="branch" data-value="Accounting & Finance"/>
        <span>Accounting & Finance (498)</span>
      </label>
      <label class="flex items-center space-x-2 text-xs text-subtle-light dark:text-subtle-dark hover:bg-gray-50 dark:hover:bg-gray-800 p-2 rounded cursor-pointer">
        <input type="checkbox" class="filter-checkbox rounded border-gray-300 dark:border-gray-600 text-primary focus:ring-primary" data-filter="branch" data-value="Adhyatmak Sahitya"/>
        <span>Adhyatmak Sahitya (7)</span>
      </label>
      <label class="flex items-center space-x-2 text-xs text-subtle-light dark:text-subtle-dark hover:bg-gray-50 dark:hover:bg-gray-800 p-2 rounded cursor-pointer">
        <input type="checkbox" class="filter-checkbox rounded border-gray-300 dark:border-gray-600 text-primary focus:ring-primary" data-filter="branch" data-value="Advertising"/>
        <span>Advertising (189)</span>
      </label>
      <label class="flex items-center space-x-2 text-xs text-subtle-light dark:text-subtle-dark hover:bg-gray-50 dark:hover:bg-gray-800 p-2 rounded cursor-pointer">
        <input type="checkbox" class="filter-checkbox rounded border-gray-300 dark:border-gray-600 text-primary focus:ring-primary" data-filter="branch" data-value="Agriculture"/>
        <span>Agriculture (9)</span>
      </label>
      <label class="flex items-center space-x-2 text-xs text-subtle-light dark:text-subtle-dark hover:bg-gray-50 dark:hover:bg-gray-800 p-2 rounded cursor-pointer">
        <input type="checkbox" class="filter-checkbox rounded border-gray-300 dark:border-gray-600 text-primary focus:ring-primary" data-filter="branch" data-value="Ahimsa"/>
        <span>Ahimsa (78)</span>
      </label>
      <label class="flex items-center space-x-2 text-xs text-subtle-light dark:text-subtle-dark hover:bg-gray-50 dark:hover:bg-gray-800 p-2 rounded cursor-pointer">
        <input type="checkbox" class="filter-checkbox rounded border-gray-300 dark:border-gray-600 text-primary focus:ring-primary" data-filter="branch" data-value="Anaesthesia"/>
        <span>Anaesthesia (74)</span>
      </label>
    </div>
  </div>

  <!-- Material Type Filter Dropdown -->
  <div id="material-filter-dropdown" class="filter-dropdown hidden bg-surface-light dark:bg-surface-dark border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg mb-4 max-h-64 overflow-y-auto">
    <div class="p-3 border-b border-gray-200 dark:border-gray-700">
      <h3 class="text-sm font-semibold text-text-light dark:text-text-dark">Select Material Type</h3>
    </div>
    <div class="p-3 space-y-2">
      <label class="flex items-center space-x-2 text-xs text-subtle-light dark:text-subtle-dark hover:bg-gray-50 dark:hover:bg-gray-800 p-2 rounded cursor-pointer">
        <input type="checkbox" class="filter-checkbox rounded border-gray-300 dark:border-gray-600 text-primary focus:ring-primary" data-filter="material" data-value="Book"/>
        <span>Book (15483)</span>
      </label>
      <label class="flex items-center space-x-2 text-xs text-subtle-light dark:text-subtle-dark hover:bg-gray-50 dark:hover:bg-gray-800 p-2 rounded cursor-pointer">
        <input type="checkbox" class="filter-checkbox rounded border-gray-300 dark:border-gray-600 text-primary focus:ring-primary" data-filter="material" data-value="Book Bank"/>
        <span>Book Bank (657)</span>
      </label>
      <label class="flex items-center space-x-2 text-xs text-subtle-light dark:text-subtle-dark hover:bg-gray-50 dark:hover:bg-gray-800 p-2 rounded cursor-pointer">
        <input type="checkbox" class="filter-checkbox rounded border-gray-300 dark:border-gray-600 text-primary focus:ring-primary" data-filter="material" data-value="Biography / Autography"/>
        <span>Biography / Autography (203)</span>
      </label>
      <label class="flex items-center space-x-2 text-xs text-subtle-light dark:text-subtle-dark hover:bg-gray-50 dark:hover:bg-gray-800 p-2 rounded cursor-pointer">
        <input type="checkbox" class="filter-checkbox rounded border-gray-300 dark:border-gray-600 text-primary focus:ring-primary" data-filter="material" data-value="Bound Volume"/>
        <span>Bound Volume (64)</span>
      </label>
      <label class="flex items-center space-x-2 text-xs text-subtle-light dark:text-subtle-dark hover:bg-gray-50 dark:hover:bg-gray-800 p-2 rounded cursor-pointer">
        <input type="checkbox" class="filter-checkbox rounded border-gray-300 dark:border-gray-600 text-primary focus:ring-primary" data-filter="material" data-value="Cassette"/>
        <span>Cassette (364)</span>
      </label>
      <label class="flex items-center space-x-2 text-xs text-subtle-light dark:text-subtle-dark hover:bg-gray-50 dark:hover:bg-gray-800 p-2 rounded cursor-pointer">
        <input type="checkbox" class="filter-checkbox rounded border-gray-300 dark:border-gray-600 text-primary focus:ring-primary" data-filter="material" data-value="Cd Rom"/>
        <span>Cd Rom (72)</span>
      </label>
      <label class="flex items-center space-x-2 text-xs text-subtle-light dark:text-subtle-dark hover:bg-gray-50 dark:hover:bg-gray-800 p-2 rounded cursor-pointer">
        <input type="checkbox" class="filter-checkbox rounded border-gray-300 dark:border-gray-600 text-primary focus:ring-primary" data-filter="material" data-value="Cd/Dvd"/>
        <span>Cd/Dvd (613)</span>
      </label>
    </div>
  </div>

  <!-- Location Filter Dropdown -->
  <div id="location-filter-dropdown" class="filter-dropdown hidden bg-surface-light dark:bg-surface-dark border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg mb-4 max-h-64 overflow-y-auto">
    <div class="p-3 border-b border-gray-200 dark:border-gray-700">
      <h3 class="text-sm font-semibold text-text-light dark:text-text-dark">Select Location</h3>
    </div>
    <div class="p-3 space-y-2">
      <label class="flex items-center space-x-2 text-xs text-subtle-light dark:text-subtle-dark hover:bg-gray-50 dark:hover:bg-gray-800 p-2 rounded cursor-pointer">
        <input type="checkbox" class="filter-checkbox rounded border-gray-300 dark:border-gray-600 text-primary focus:ring-primary" data-filter="location" data-value="Arts & Commerce College"/>
        <span>Arts & Commerce College (74963)</span>
      </label>
      <label class="flex items-center space-x-2 text-xs text-subtle-light dark:text-subtle-dark hover:bg-gray-50 dark:hover:bg-gray-800 p-2 rounded cursor-pointer">
        <input type="checkbox" class="filter-checkbox rounded border-gray-300 dark:border-gray-600 text-primary focus:ring-primary" data-filter="location" data-value="KJSCE Library"/>
        <span>KJSCE Library (15474)</span>
      </label>
      <label class="flex items-center space-x-2 text-xs text-subtle-light dark:text-subtle-dark hover:bg-gray-50 dark:hover:bg-gray-800 p-2 rounded cursor-pointer">
        <input type="checkbox" class="filter-checkbox rounded border-gray-300 dark:border-gray-600 text-primary focus:ring-primary" data-filter="location" data-value="KJSIDS"/>
        <span>KJSIDS (27862)</span>
      </label>
      <label class="flex items-center space-x-2 text-xs text-subtle-light dark:text-subtle-dark hover:bg-gray-50 dark:hover:bg-gray-800 p-2 rounded cursor-pointer">
        <input type="checkbox" class="filter-checkbox rounded border-gray-300 dark:border-gray-600 text-primary focus:ring-primary" data-filter="location" data-value="KJSIM Library"/>
        <span>KJSIM Library (18326)</span>
      </label>
      <label class="flex items-center space-x-2 text-xs text-subtle-light dark:text-subtle-dark hover:bg-gray-50 dark:hover:bg-gray-800 p-2 rounded cursor-pointer">
        <input type="checkbox" class="filter-checkbox rounded border-gray-300 dark:border-gray-600 text-primary focus:ring-primary" data-filter="location" data-value="Medical College"/>
        <span>Medical College (8990)</span>
      </label>
      <label class="flex items-center space-x-2 text-xs text-subtle-light dark:text-subtle-dark hover:bg-gray-50 dark:hover:bg-gray-800 p-2 rounded cursor-pointer">
        <input type="checkbox" class="filter-checkbox rounded border-gray-300 dark:border-gray-600 text-primary focus:ring-primary" data-filter="location" data-value="Polytechnic"/>
        <span>Polytechnic (8489)</span>
      </label>
      <label class="flex items-center space-x-2 text-xs text-subtle-light dark:text-subtle-dark hover:bg-gray-50 dark:hover:bg-gray-800 p-2 rounded cursor-pointer">
        <input type="checkbox" class="filter-checkbox rounded border-gray-300 dark:border-gray-600 text-primary focus:ring-primary" data-filter="location" data-value="Centre for Buddhist Studies"/>
        <span>Centre for Buddhist Studies (9163)</span>
      </label>
    </div>
  </div>

  <!-- Language Filter Dropdown -->
  <div id="language-filter-dropdown" class="filter-dropdown hidden bg-surface-light dark:bg-surface-dark border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg mb-4 max-h-64 overflow-y-auto">
    <div class="p-3 border-b border-gray-200 dark:border-gray-700">
      <h3 class="text-sm font-semibold text-text-light dark:text-text-dark">Select Language</h3>
    </div>
    <div class="p-3 space-y-2">
      <label class="flex items-center space-x-2 text-xs text-subtle-light dark:text-subtle-dark hover:bg-gray-50 dark:hover:bg-gray-800 p-2 rounded cursor-pointer">
        <input type="checkbox" class="filter-checkbox rounded border-gray-300 dark:border-gray-600 text-primary focus:ring-primary" data-filter="language" data-value="English"/>
        <span>English (200382)</span>
      </label>
      <label class="flex items-center space-x-2 text-xs text-subtle-light dark:text-subtle-dark hover:bg-gray-50 dark:hover:bg-gray-800 p-2 rounded cursor-pointer">
        <input type="checkbox" class="filter-checkbox rounded border-gray-300 dark:border-gray-600 text-primary focus:ring-primary" data-filter="language" data-value="Marathi"/>
        <span>Marathi</span>
      </label>
      <label class="flex items-center space-x-2 text-xs text-subtle-light dark:text-subtle-dark hover:bg-gray-50 dark:hover:bg-gray-800 p-2 rounded cursor-pointer">
        <input type="checkbox" class="filter-checkbox rounded border-gray-300 dark:border-gray-600 text-primary focus:ring-primary" data-filter="language" data-value="Hindi"/>
        <span>Hindi</span>
      </label>
      <label class="flex items-center space-x-2 text-xs text-subtle-light dark:text-subtle-dark hover:bg-gray-50 dark:hover:bg-gray-800 p-2 rounded cursor-pointer">
        <input type="checkbox" class="filter-checkbox rounded border-gray-300 dark:border-gray-600 text-primary focus:ring-primary" data-filter="language" data-value="Sanskrit"/>
        <span>Sanskrit</span>
      </label>
      <label class="flex items-center space-x-2 text-xs text-subtle-light dark:text-subtle-dark hover:bg-gray-50 dark:hover:bg-gray-800 p-2 rounded cursor-pointer">
        <input type="checkbox" class="filter-checkbox rounded border-gray-300 dark:border-gray-600 text-primary focus:ring-primary" data-filter="language" data-value="French"/>
        <span>French (259)</span>
      </label>
      <label class="flex items-center space-x-2 text-xs text-subtle-light dark:text-subtle-dark hover:bg-gray-50 dark:hover:bg-gray-800 p-2 rounded cursor-pointer">
        <input type="checkbox" class="filter-checkbox rounded border-gray-300 dark:border-gray-600 text-primary focus:ring-primary" data-filter="language" data-value="Chinese"/>
        <span>Chinese (76)</span>
      </label>
      <label class="flex items-center space-x-2 text-xs text-subtle-light dark:text-subtle-dark hover:bg-gray-50 dark:hover:bg-gray-800 p-2 rounded cursor-pointer">
        <input type="checkbox" class="filter-checkbox rounded border-gray-300 dark:border-gray-600 text-primary focus:ring-primary" data-filter="language" data-value="Arabic"/>
        <span>Arabic (45)</span>
      </label>
    </div>
  </div>
</aside>
<div class="lg:col-span-3">
<div class="bg-surface-light dark:bg-surface-dark p-4 rounded-lg shadow-lg mb-6">
<h2 class="text-lg font-bold mb-3 text-text-light dark:text-text-dark">Search Catalogue</h2>
<div class="flex flex-col sm:flex-row space-y-3 sm:space-y-0 sm:space-x-3">
<div class="flex-grow">
<label class="sr-only" for="search">Search</label>
<input class="w-full rounded-md border-gray-300 dark:border-gray-600 bg-background-light dark:bg-background-dark focus:ring-primary focus:border-primary" id="search" placeholder="e.g. 'The Great Gatsby', 'F. Scott Fitzgerald'" type="text"/>
</div>
<button class="bg-primary text-white font-bold py-2 px-4 rounded-md flex items-center justify-center space-x-2 hover:bg-red-700 transition-colors duration-200 text-sm">
<span class="material-icons text-lg">search</span>
<span>Search</span>
</button>
</div>
</div>
<div class="text-center py-16 hidden">
<div class="bg-surface-light dark:bg-surface-dark p-8 rounded-lg shadow-md inline-block">
<span class="material-icons text-6xl text-primary mb-4">search_off</span>
<h3 class="text-2xl font-bold text-text-light dark:text-text-dark">No results found</h3>
<p class="text-subtle-light dark:text-subtle-dark mt-2">Try adjusting your search or filters.</p>
</div>
</div>
<div>
<div class="flex justify-between items-center mb-4">
<p class="text-subtle-light dark:text-subtle-dark">Showing 1-3 of 3 results</p>
<div>
<label class="sr-only" for="sort">Sort by</label>
<select class="rounded-md border-gray-300 dark:border-gray-600 bg-background-light dark:bg-background-dark focus:ring-primary focus:border-primary" id="sort">
<option>Relevance</option>
<option>Date (Newest)</option>
<option>Date (Oldest)</option>
<option>Title (A-Z)</option>
</select>
</div>
</div>
<div class="space-y-6">
<div class="bg-surface-light dark:bg-surface-dark p-4 rounded-lg shadow-lg flex flex-col sm:flex-row space-y-4 sm:space-y-0 sm:space-x-4">
<img alt="Book cover for Abstracts Of The United Nations Day Of Vesak 2025" class="w-24 h-36 object-cover rounded-md flex-shrink-0" src="https://lh3.googleusercontent.com/aida-public/AB6AXuCPm0yFYqwBEq8_5o_gpOxcDljra20d9_KNCZR8xPl-rSQo80585mLfIJFSg4kwtovmK2du0LKgB5bekmVMpMrSv1rS2EOu-zGO0lvt0_Kf88eFLALMtUWmiQH6F3DBl_ho9jMZs-OsQGlKt0SGDuRyK-8jsZ4scMNEnUdG54zgADz4oJQebUQz446o4dLLxdLcSSxjjocW3WlNmzFplb-_ZLiT3HV9JIS6CVnviGrw4foFyQ5aSwHFg2mwRYWzkj-WFQ420ZOOqw"/>
<div class="flex-grow">
<h3 class="text-lg font-bold text-primary">Abstracts Of The United Nations Day Of Vesak 2025 conference by... Then, Thich Duc</h3>
<p class="text-subtle-light dark:text-subtle-dark">by Thich Duc Then</p>
<p class="mt-2 text-sm text-text-light dark:text-text-dark">Available at: KJSCE Library</p>
</div>
<div class="flex-shrink-0 flex flex-col items-start sm:items-end justify-between">
<span class="bg-green-100 text-green-800 text-xs font-medium px-2.5 py-0.5 rounded-full dark:bg-green-900 dark:text-green-300">Available</span>
<button class="bg-primary text-white font-bold py-2 px-4 rounded-md mt-2 sm:mt-0 hover:bg-red-700 transition-colors duration-200">Borrow</button>
</div>
</div>
<div class="bg-surface-light dark:bg-surface-dark p-4 rounded-lg shadow-lg flex flex-col sm:flex-row space-y-4 sm:space-y-0 sm:space-x-4">
<img alt="Book cover for The Great And The Evil Party" class="w-24 h-36 object-cover rounded-md flex-shrink-0" src="https://lh3.googleusercontent.com/aida-public/AB6AXuA-l2MLlTZI7Iece035WoQJjnc41buQuAcvSFWm9GYLPznshLEFwHjsG-MWhuzZKiu9g9qsfI7Dxq-f_yv1CAI0bJgID1u8YuqG9AO4Ihbj4qE_zTGQVr06IJRz56eUECl4lm3_sOBXhu5P0dtTgV1AYu6WpvLTcyCcs6wFO-BkS3WRDY2u3lc7ecG1l2GDsC54_YZDApe7WD30Yboek76pwrRjOBCJwme_rVHMQ-qB_Hz1C844cE1Nz_HhEcRcs4wIy7xfjNE77Q"/>
<div class="flex-grow">
<h3 class="text-lg font-bold text-primary">The Great And The Evil Party Surprise by... Taryon, Skadia</h3>
<p class="text-subtle-light dark:text-subtle-dark">by Skadia Taryon</p>
<p class="mt-2 text-sm text-text-light dark:text-text-dark">Available at: Medical College</p>
</div>
<div class="flex-shrink-0 flex flex-col items-start sm:items-end justify-between">
<span class="bg-yellow-100 text-yellow-800 text-xs font-medium px-2.5 py-0.5 rounded-full dark:bg-yellow-900 dark:text-yellow-300">Due in 3 days</span>
<button class="bg-gray-400 text-white font-bold py-2 px-4 rounded-md mt-2 sm:mt-0 cursor-not-allowed">Renew</button>
</div>
</div>
<div class="bg-surface-light dark:bg-surface-dark p-4 rounded-lg shadow-lg flex flex-col sm:flex-row space-y-4 sm:space-y-0 sm:space-x-4">
<img alt="Book cover for An Introduction To Earth Science" class="w-24 h-36 object-cover rounded-md flex-shrink-0" src="https://lh3.googleusercontent.com/aida-public/AB6AXuCi7v1-YW3nGTeYco9fry801ggivv19l-XsHIx6s2ZPHr4yMlNqUNRBs9VyoWxn8pA7op0QIOaq8Gp2uuuCw-KbG4gWUN6YuFWfDrA7Xj7BFKWrfUE78GrnjhHVZkLX1WYaA8hZmwgxsHVBmi1IdfqFiNdBYQMx8q3CmxG0Ib1yPC41mcZ73NcDYbVgto1mJOnsaZ0zhJT5HomhTziM524yWU9vkyMd6z_sDjY--4UOZ5HjxKHUJo5AtiufVHtoYwIVxLqR4xlMxA"/>
<div class="flex-grow">
<h3 class="text-lg font-bold text-primary">An Introduction To Paleontology by... Dasgupta, Anjali</h3>
<p class="text-subtle-light dark:text-subtle-dark">by Anjali Dasgupta</p>
<p class="mt-2 text-sm text-text-light dark:text-text-dark">Available at: Arts &amp; Commerce College</p>
</div>
<div class="flex-shrink-0 flex flex-col items-start sm:items-end justify-between">
<span class="bg-red-100 text-red-800 text-xs font-medium px-2.5 py-0.5 rounded-full dark:bg-red-900 dark:text-red-300">Checked Out</span>
<button class="bg-gray-400 text-white font-bold py-2 px-4 rounded-md mt-2 sm:mt-0 cursor-not-allowed">Borrow</button>
</div>
</div>
</div>
</div>
</div>
</div>
</main>
<footer class="bg-surface-light dark:bg-surface-dark border-t border-gray-200 dark:border-gray-700 mt-12 py-6">
<div class="container mx-auto px-4 sm:px-6 lg:px-8 text-center text-subtle-light dark:text-subtle-dark text-sm">
<p>© 2024 Somaiya Vidyavihar. All rights reserved.</p>
<div class="mt-2">
<a class="hover:underline" href="#">Legal Notice</a>
<span class="mx-2">|</span>
<a class="hover:underline" href="#">Usage Policy</a>
<span class="mx-2">|</span>
<a class="hover:underline" href="#">Accessibility Statement</a>
</div>
</div>
</footer>
</div>
<script>
    // Accessibility & Preference Utilities
    const root = document.documentElement;
    const storageKey = (k) => `somaiya_pref_${k}`;

    // Dark / Contrast Mode Toggle
    const contrastToggle = document.getElementById('contrast-toggle');
    const savedTheme = localStorage.getItem(storageKey('theme'));
    if (savedTheme === 'dark') root.classList.add('dark');
    if (contrastToggle) {
      contrastToggle.setAttribute('aria-pressed', root.classList.contains('dark'));
      contrastToggle.addEventListener('click', () => {
        const isDark = root.classList.toggle('dark');
        localStorage.setItem(storageKey('theme'), isDark ? 'dark' : 'light');
        contrastToggle.setAttribute('aria-pressed', isDark);
      });
    }

    // Font Size Controls
    const incBtn = document.getElementById('font-increase');
    const decBtn = document.getElementById('font-decrease');
    const fontIndicator = document.getElementById('font-scale-indicator');
    const baseSize = 1; // rem
    let currentScale = parseFloat(localStorage.getItem(storageKey('fontScale'))) || 1;
    const applyFontScale = () => {
      document.body.style.fontSize = `${baseSize * currentScale}rem`;
      if (fontIndicator) fontIndicator.textContent = `${Math.round(currentScale * 100)}%`;
    };
    applyFontScale();
    const clamp = (val, min, max) => Math.min(Math.max(val, min), max);
    if (incBtn && decBtn) {
      incBtn.addEventListener('click', () => {
        currentScale = clamp((currentScale + 0.1), 0.8, 1.6);
        localStorage.setItem(storageKey('fontScale'), currentScale.toFixed(2));
        applyFontScale();
      });
      decBtn.addEventListener('click', () => {
        currentScale = clamp((currentScale - 0.1), 0.8, 1.6);
        localStorage.setItem(storageKey('fontScale'), currentScale.toFixed(2));
        applyFontScale();
      });
    }

    // Reduced Motion Toggle
    const motionToggle = document.getElementById('motion-toggle');
    const savedMotion = localStorage.getItem(storageKey('reducedMotion')) === 'true';
    if (savedMotion) root.classList.add('reduce-motion');
    if (motionToggle) {
      motionToggle.setAttribute('aria-pressed', savedMotion);
      motionToggle.addEventListener('click', () => {
        const newState = !root.classList.contains('reduce-motion');
        root.classList.toggle('reduce-motion');
        localStorage.setItem(storageKey('reducedMotion'), newState);
        motionToggle.setAttribute('aria-pressed', newState);
      });
    }

    // Optional: respond to prefers-reduced-motion if no explicit preference stored
    if (!localStorage.getItem(storageKey('reducedMotion'))) {
      if (window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
        root.classList.add('reduce-motion');
        if (motionToggle) motionToggle.setAttribute('aria-pressed', true);
      }
    }

    // Basic language switch placeholder (non-functional demo)
    const langSwitch = document.getElementById('language-switch');
    langSwitch?.addEventListener('change', (e) => {
      // Future: implement localization logic
      console.log('Language changed to', e.target.value);
    });

    // Mobile menu functionality
    document.addEventListener('DOMContentLoaded', function() {
      const mobileMenuToggle = document.getElementById('mobile-menu-toggle');
      const mobileMenu = document.getElementById('mobile-menu');
      const mobileMenuClose = document.getElementById('mobile-menu-close');
      const mobileMenuBackdrop = document.getElementById('mobile-menu-backdrop');

      const accessibilityToggle = document.getElementById('mobile-accessibility-toggle');
      const accessibilityMenu = document.getElementById('mobile-accessibility-menu');
      const accessibilityClose = document.getElementById('accessibility-menu-close');
      const accessibilityBackdrop = document.getElementById('accessibility-menu-backdrop');

      // Mobile navigation menu
      if (mobileMenuToggle && mobileMenu) {
        const openMobileMenu = () => {
          mobileMenu.classList.remove('hidden');
          mobileMenuToggle.setAttribute('aria-expanded', 'true');
          document.body.style.overflow = 'hidden';
        };

        const closeMobileMenu = () => {
          mobileMenu.classList.add('hidden');
          mobileMenuToggle.setAttribute('aria-expanded', 'false');
          document.body.style.overflow = '';
        };

        mobileMenuToggle.addEventListener('click', openMobileMenu);
        mobileMenuClose?.addEventListener('click', closeMobileMenu);
        mobileMenuBackdrop?.addEventListener('click', closeMobileMenu);

        // Close on escape key
        document.addEventListener('keydown', (e) => {
          if (e.key === 'Escape' && !mobileMenu.classList.contains('hidden')) {
            closeMobileMenu();
          }
        });
      }

      // Mobile accessibility menu
      if (accessibilityToggle && accessibilityMenu) {
        const openAccessibilityMenu = () => {
          accessibilityMenu.classList.remove('hidden');
          document.body.style.overflow = 'hidden';
        };

        const closeAccessibilityMenu = () => {
          accessibilityMenu.classList.add('hidden');
          document.body.style.overflow = '';
        };

        accessibilityToggle.addEventListener('click', openAccessibilityMenu);
        accessibilityClose?.addEventListener('click', closeAccessibilityMenu);
        accessibilityBackdrop?.addEventListener('click', closeAccessibilityMenu);

        // Close on escape key
        document.addEventListener('keydown', (e) => {
          if (e.key === 'Escape' && !accessibilityMenu.classList.contains('hidden')) {
            closeAccessibilityMenu();
          }
        });
      }

      // Mobile accessibility controls sync with desktop
      const mobileContrastToggle = document.getElementById('mobile-contrast-toggle');
      const mobileFontIncrease = document.getElementById('mobile-font-increase');
      const mobileFontDecrease = document.getElementById('mobile-font-decrease');
      const mobileMotionToggle = document.getElementById('mobile-motion-toggle');
      const mobileLanguageSwitch = document.getElementById('mobile-language-switch');
      const mobileFontIndicator = document.getElementById('mobile-font-scale-indicator');

      // Sync mobile controls with desktop
      if (mobileContrastToggle) {
        mobileContrastToggle.addEventListener('click', () => {
          const isDark = root.classList.toggle('dark');
          localStorage.setItem(storageKey('theme'), isDark ? 'dark' : 'light');
          
          // Update button states
          const toggleIcon = mobileContrastToggle.querySelector('.material-icons');
          toggleIcon.textContent = isDark ? 'toggle_on' : 'toggle_off';
          mobileContrastToggle.setAttribute('aria-pressed', isDark);
          
          // Sync with desktop toggle
          if (contrastToggle) {
            contrastToggle.setAttribute('aria-pressed', isDark);
          }
        });

        // Initialize mobile toggle state
        const isDark = root.classList.contains('dark');
        const toggleIcon = mobileContrastToggle.querySelector('.material-icons');
        toggleIcon.textContent = isDark ? 'toggle_on' : 'toggle_off';
        mobileContrastToggle.setAttribute('aria-pressed', isDark);
      }

      if (mobileFontIncrease && mobileFontDecrease) {
        const updateMobileFontIndicator = () => {
          if (mobileFontIndicator) {
            mobileFontIndicator.textContent = `${Math.round(currentScale * 100)}%`;
          }
        };

        mobileFontIncrease.addEventListener('click', () => {
          currentScale = clamp((currentScale + 0.1), 0.8, 1.6);
          localStorage.setItem(storageKey('fontScale'), currentScale.toFixed(2));
          applyFontScale();
          updateMobileFontIndicator();
        });

        mobileFontDecrease.addEventListener('click', () => {
          currentScale = clamp((currentScale - 0.1), 0.8, 1.6);
          localStorage.setItem(storageKey('fontScale'), currentScale.toFixed(2));
          applyFontScale();
          updateMobileFontIndicator();
        });

        // Initialize mobile font indicator
        updateMobileFontIndicator();
      }

      if (mobileMotionToggle) {
        mobileMotionToggle.addEventListener('click', () => {
          const newState = !root.classList.contains('reduce-motion');
          root.classList.toggle('reduce-motion');
          localStorage.setItem(storageKey('reducedMotion'), newState);
          
          // Update button state
          const toggleIcon = mobileMotionToggle.querySelector('.material-icons');
          toggleIcon.textContent = newState ? 'toggle_on' : 'toggle_off';
          mobileMotionToggle.setAttribute('aria-pressed', newState);
          
          // Sync with desktop toggle
          if (motionToggle) {
            motionToggle.setAttribute('aria-pressed', newState);
          }
        });

        // Initialize mobile motion toggle state
        const savedMotion = localStorage.getItem(storageKey('reducedMotion')) === 'true';
        const toggleIcon = mobileMotionToggle.querySelector('.material-icons');
        toggleIcon.textContent = savedMotion ? 'toggle_on' : 'toggle_off';
        mobileMotionToggle.setAttribute('aria-pressed', savedMotion);
      }

      if (mobileLanguageSwitch) {
        mobileLanguageSwitch.addEventListener('change', (e) => {
          console.log('Mobile language changed to', e.target.value);
          // Sync with desktop select if it exists
          if (langSwitch) {
            langSwitch.value = e.target.value;
          }
        });
      }

      // Filter functionality
      const filterButtons = document.querySelectorAll('.filter-btn');
      const filterDropdowns = document.querySelectorAll('.filter-dropdown');
      const filterCheckboxes = document.querySelectorAll('.filter-checkbox');
      const activeFiltersContainer = document.getElementById('active-filters');
      let activeFilters = new Map(); // Store active filters: filterType -> Set of values

      // Load saved filters from localStorage
      const savedFilters = localStorage.getItem(storageKey('activeFilters'));
      if (savedFilters) {
        try {
          const parsed = JSON.parse(savedFilters);
          activeFilters = new Map(Object.entries(parsed).map(([key, values]) => [key, new Set(values)]));
          renderActiveFilters();
        } catch (e) {
          console.warn('Failed to parse saved filters:', e);
        }
      }

      // Toggle filter dropdowns
      filterButtons.forEach(button => {
        button.addEventListener('click', (e) => {
          e.stopPropagation();
          const filterType = button.id.replace('-filter-btn', '');
          const dropdown = document.getElementById(`${filterType}-filter-dropdown`);
          
          // Close other dropdowns
          filterDropdowns.forEach(d => {
            if (d !== dropdown) {
              d.classList.add('hidden');
            }
          });
          
          // Toggle current dropdown
          dropdown.classList.toggle('hidden');
          
          // Update button icon
          const icon = button.querySelector('.material-icons:last-child');
          if (dropdown.classList.contains('hidden')) {
            icon.textContent = 'expand_more';
          } else {
            icon.textContent = 'expand_less';
          }
        });
      });

      // Close dropdowns when clicking outside
      document.addEventListener('click', (e) => {
        if (!e.target.closest('.filter-btn') && !e.target.closest('.filter-dropdown')) {
          filterDropdowns.forEach(dropdown => {
            dropdown.classList.add('hidden');
            const filterType = dropdown.id.replace('-filter-dropdown', '');
            const button = document.getElementById(`${filterType}-filter-btn`);
            const icon = button?.querySelector('.material-icons:last-child');
            if (icon) icon.textContent = 'expand_more';
          });
        }
      });

      // Handle filter checkbox changes
      filterCheckboxes.forEach(checkbox => {
        const filterType = checkbox.dataset.filter;
        const filterValue = checkbox.dataset.value;
        
        // Initialize checkbox state based on saved filters
        if (activeFilters.has(filterType) && activeFilters.get(filterType).has(filterValue)) {
          checkbox.checked = true;
        }
        
        checkbox.addEventListener('change', () => {
          if (!activeFilters.has(filterType)) {
            activeFilters.set(filterType, new Set());
          }
          
          const filterSet = activeFilters.get(filterType);
          
          if (checkbox.checked) {
            filterSet.add(filterValue);
          } else {
            filterSet.delete(filterValue);
            if (filterSet.size === 0) {
              activeFilters.delete(filterType);
            }
          }
          
          // Save to localStorage
          const filtersToSave = {};
          activeFilters.forEach((values, type) => {
            filtersToSave[type] = Array.from(values);
          });
          localStorage.setItem(storageKey('activeFilters'), JSON.stringify(filtersToSave));
          
          renderActiveFilters();
          
          // Close dropdown after selection
          const dropdown = checkbox.closest('.filter-dropdown');
          if (dropdown) {
            dropdown.classList.add('hidden');
            const filterType = dropdown.id.replace('-filter-dropdown', '');
            const button = document.getElementById(`${filterType}-filter-btn`);
            const icon = button?.querySelector('.material-icons:last-child');
            if (icon) icon.textContent = 'expand_more';
          }
        });
      });

      // Render active filters as removable boxes
      function renderActiveFilters() {
        activeFiltersContainer.innerHTML = '';
        
        if (activeFilters.size === 0) {
          return;
        }
        
        activeFilters.forEach((values, filterType) => {
          values.forEach(value => {
            const filterBox = document.createElement('div');
            filterBox.className = 'inline-flex items-center gap-2 bg-primary/10 text-primary px-3 py-1 rounded-full text-sm';
            
            // Filter type label
            const typeLabel = document.createElement('span');
            typeLabel.className = 'text-xs font-medium opacity-75';
            typeLabel.textContent = filterType.charAt(0).toUpperCase() + filterType.slice(1) + ':';
            filterBox.appendChild(typeLabel);
            
            // Filter value
            const valueSpan = document.createElement('span');
            valueSpan.textContent = value;
            filterBox.appendChild(valueSpan);
            
            // Remove button
            const removeBtn = document.createElement('button');
            removeBtn.className = 'ml-1 hover:bg-primary/20 rounded-full p-0.5 transition-colors';
            removeBtn.setAttribute('aria-label', `Remove ${filterType} filter: ${value}`);
            
            const removeIcon = document.createElement('span');
            removeIcon.className = 'material-icons text-sm';
            removeIcon.textContent = 'close';
            removeBtn.appendChild(removeIcon);
            
            removeBtn.addEventListener('click', () => {
              // Remove from active filters
              const filterSet = activeFilters.get(filterType);
              filterSet.delete(value);
              if (filterSet.size === 0) {
                activeFilters.delete(filterType);
              }
              
              // Uncheck the corresponding checkbox
              const checkbox = document.querySelector(`.filter-checkbox[data-filter="${filterType}"][data-value="${value}"]`);
              if (checkbox) {
                checkbox.checked = false;
              }
              
              // Save updated filters
              const filtersToSave = {};
              activeFilters.forEach((values, type) => {
                filtersToSave[type] = Array.from(values);
              });
              localStorage.setItem(storageKey('activeFilters'), JSON.stringify(filtersToSave));
              
              renderActiveFilters();
            });
            
            filterBox.appendChild(removeBtn);
            activeFiltersContainer.appendChild(filterBox);
          });
        });
      }

      // Clear all filters button (optional - can be added later)
      const clearAllBtn = document.createElement('button');
      clearAllBtn.className = 'w-full mt-3 px-3 py-2 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-text-light dark:text-text-dark rounded-lg text-sm font-medium transition-colors';
      clearAllBtn.textContent = 'Clear All Filters';
      clearAllBtn.addEventListener('click', () => {
        activeFilters.clear();
        
        // Uncheck all checkboxes
        filterCheckboxes.forEach(checkbox => {
          checkbox.checked = false;
        });
        
        // Save empty filters
        localStorage.setItem(storageKey('activeFilters'), '{}');
        
        renderActiveFilters();
      });
      
      // Add clear all button to the filter section
      const filterSection = document.querySelector('aside');
      if (filterSection && activeFilters.size > 0) {
        const container = document.querySelector('#active-filters').parentElement;
        container.appendChild(clearAllBtn);
      }
    });
  </script>

</body></html>
